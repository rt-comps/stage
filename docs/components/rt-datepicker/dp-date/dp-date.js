const[e]=rtlib.parseCompURL(import.meta.url);customElements.define(e.slice(e.lastIndexOf("/")+1),class extends rtBC.RTBaseClass{#e;#t=new Date;constructor(){super(),this.#e=this.attachShadow({mode:"open"}),this.#e.append(this.$getTemplate()),this.#e.querySelector("#container").addEventListener("click",()=>this.pickDate())}connectedCallback(){setTimeout(()=>{this.parentNode?(this.parentNode.addEventListener("changeWeek",()=>this.render()),this.parentNode.addEventListener("choiceMade",e=>this.reset(e)),this.render()):console.error(`${this.localName} - Could find parent`)})}static get observedAttributes(){return["invalid"]}attributeChangedCallback(){this.render()}render(){if(this.hasAttribute("day")){const e=new Date,t=parseInt(this.$attr("day")),s=this.parentNode._week||0;this.#e.querySelector("#container").style.color=this.hasAttribute("invalid")||0===s&&e.getDay()>t?"rgb(204,204,204)":"rgb(0,0,0)",this.#t=e,this.#t.setDate(e.getDate()+7*s+(t-e.getDay())),this.#e.querySelector("#day").innerHTML=this.$localeDate(this.#t,this.parentNode._locale,{weekday:"short"}),this.#e.querySelector("#date").innerHTML=`${this.#t.getDate()} ${this.$localeDate(this.#t,this.parentNode._locale,{month:"short"})}`}else this.#e.querySelector("#day").innerHTML="ERROR",this.#e.querySelector("#date").innerHTML="..."}pickDate(){const e=this.#e.querySelector("#container");"rgb(0, 0, 0)"==e.style.color&&(e.classList.add("chosen"),this.$dispatch({name:"datepicked",detail:{date:this.#t,day:this.$attr("day")}}))}reset(e){this.hasAttribute("invalid")||this.$attr("day")!==e.detail.day&&this.#e.querySelector("#container").classList.remove("chosen")}});