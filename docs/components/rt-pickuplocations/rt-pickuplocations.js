const[e]=rtlib.parseCompURL(import.meta.url);customElements.define(e,class extends rtBC.RTBaseClass{static formAssociated=!0;#e;#t;#i;#s;constructor(){super(),this.#e=this.attachShadow({mode:"open"}),this.#e.append(this.$getTemplate()),this.#t=this.attachInternals(),this.#i=this.#e.querySelector("#fs-time"),this.#a();const e={handleEvent:this.#r,pickLoc:this};this.#e.querySelector("#container").addEventListener("change",e)}connectedCallBack(){"undefined"!=typeof rtForm&&rtForm.findNode(this,"form")&&rtForm.getStyle(this,rtForm.findNode(this)),this.#s=this.#e.querySelector("#container rt-datepicker")}formAssociatedCallback(){this.#t.form&&this.#t.form.addEventListener("formdata",e=>{const t=this.#e.querySelector('input[name="location"]:checked');e.formData.append("pickup-location",t?t.value:"");const i=this.#e.querySelector('input[name="time-slot"]:checked');e.formData.append("pickup-time",i?i.value:""),this.#s&&e.formData.append("pickup-date",this.#s.value)})}formResetCallback(){[...this.#e.querySelectorAll("input:checked")].forEach(e=>e.checked=!1),this.#i.hidden=!0,this.#s&&this.#s.reset()}#a(){const e=[...this.querySelectorAll("pu-loc")];if(e.length>0){const t=(e,t)=>this.$createElement({tag:"label",append:[this.$createElement({tag:"input",type:"radio",name:e,value:t,required:!0}),this.$createElement({tag:"span",innerHTML:`&nbsp;${t}`})]});this.#e.querySelector("fieldset#pickup").append(...e.map(e=>t("location",e.id))),this.#e.querySelector("fieldset#pu-times").append(...e.map(e=>{let i;const s=[...e.querySelectorAll("time-slot")];if(s.length){const a=[...s.map(e=>t("time-slot",e.innerHTML))];i=this.$createElement({tag:"div",id:`rad-${e.id}`,hidden:!0,append:a})}return i}));const i=this.querySelector("pu-dates");if(i){const e={},t=i.attributes;for(let i=0;i<t.length;i++){const s=t.item(i);e[s.name]=s.value}this.#e.querySelector("#container").append(this.$createElement({tag:"rt-datepicker",attrs:e})),this.#s=this.#e.querySelector("#container rt-datepicker")}}}#r(e){let t=this;if(e instanceof Event){if(e.stopPropagation(),t=this.pickLoc,"location"===e.target.getAttribute("name")){[...e.currentTarget.querySelectorAll("fieldset div")].forEach(t=>{t.id===`rad-${e.target.value}`?t.hidden=!1:t.hidden=!0}),!0===t.#i.hidden&&(t.#i.hidden=!1)}return void("time-slot"===e.target.getAttribute("name")&&!0===t.#s.hidden&&(t.#s.hidden=!1))}const i=t.#e.querySelectorAll('#container input[name="time-slot"]:checked');i&&(i.checked=!1)}checkValidity(){const e=new Map([["valid",!0]]);return["location","time-slot"].forEach(t=>{e.get("valid")&&(this.#e.querySelector(`input[name="${t}"]:checked`)||(e.set("valid",!1),e.set("field",`pickup-location: ${t}`)))}),e.get("valid")&&this.#s?this.#e.querySelector("rt-datepicker").checkValidity():e}focus(e){switch(e.replace(/^pickup-location: /,"")){case"location":this.#e.querySelector("#fs-pickup").focus({focusVisible:!0});break;case"time-slot":this.#e.querySelector("#fs-time").focus({focusVisible:!0});break;default:this.#s.focus()}}});