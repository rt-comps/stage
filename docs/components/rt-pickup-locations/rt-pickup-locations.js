let[compName]=rtlib.parseCompURL(import.meta.url);customElements.define(compName,class extends rtBC.RTBaseClass{static formAssociated=!0;#_sR;#_internals;#_times;#_dates;constructor(){super(),this.#_sR=this.attachShadow({mode:"open"}),this.#_sR.append(this.$getTemplate()),this.#_internals=this.attachInternals(),this.#_times=this.#_sR.querySelector("#fs-time"),this.#render();var e={handleEvent:this.#updateRadio,pickLoc:this};this.#_sR.querySelector("#container").addEventListener("change",e)}connectedCallBack(){"undefined"!=typeof rtForm&&rtForm.findNode(this,"form")&&rtForm.getStyle(this,rtForm.findNode(this)),this.#_dates=this.#_sR.querySelector("#container rt-datepicker")}formAssociatedCallback(){this.#_internals.form&&this.#_internals.form.addEventListener("formdata",e=>{var t=this.#_sR.querySelector('input[name="location"]:checked'),t=(e.formData.append("pickup-location",t?t.value:""),this.#_sR.querySelector('input[name="time-slot"]:checked'));e.formData.append("pickup-time",t?t.value:""),e.formData.append("pickup-date",this.#_dates.value)})}formResetCallback(){[...this.#_sR.querySelectorAll("input:checked")].forEach(e=>e.checked=!1),this.#_times.hidden=!0,this.#_dates.reset()}#render(){var e=[...this.querySelectorAll("pu-loc")];if(0<e.length){let a=(e,t)=>this.$createElement({tag:"label",append:[this.$createElement({tag:"input",type:"radio",name:e,value:t,required:!0}),this.$createElement({tag:"span",innerHTML:"&nbsp;"+t})]});this.#_sR.querySelector("fieldset#pickup").append(...e.map(e=>a("location",e.id))),this.#_sR.querySelector("fieldset#pu-times").append(...e.map(e=>{let t;var i=[...e.querySelectorAll("time-slot")];return i.length&&(i=[...i.map(e=>a("time-slot",e.innerHTML))],t=this.$createElement({tag:"div",id:"rad-"+e.id,hidden:!0,append:i})),t}));e=this.querySelector("pu-date");if(e){let t={};Array.from(e.attributes).forEach(e=>{t[e.name]=e.value}),this.#_sR.querySelector("#container").append(this.$createElement({tag:"rt-datepicker",attrs:t})),this.#_dates=this.#_sR.querySelector("#container rt-datepicker")}}}#updateRadio(t){let e=this;var i;t instanceof Event?(t.stopPropagation(),e=this.pickLoc,"location"===t.target.getAttribute("name")&&([...t.currentTarget.querySelectorAll("fieldset div")].forEach(e=>{e.id==="rad-"+t.target.value?e.hidden=!1:e.hidden=!0}),!0===e.#_times.hidden)&&(e.#_times.hidden=!1),"time-slot"===t.target.getAttribute("name")&&!0===e.#_dates.hidden&&(e.#_dates.hidden=!1)):(i=e.#_sR.querySelectorAll('#container input[name="time-slot"]:checked'))&&(i.checked=!1)}checkValidity(){let t=new Map([["valid",!0]]);return["location","time-slot"].forEach(e=>{!t.get("valid")||this.#_sR.querySelector(`input[name="${e}"]:checked`)||(t.set("valid",!1),t.set("field","pickup-location: "+e))}),t.get("valid")?this.#_sR.querySelector("rt-datepicker").checkValidity():t}focus(e){switch(e.replace(/^pickup-location: /,"")){case"location":this.#_sR.querySelector("#fs-pickup").focus({focusVisible:!0});break;case"time-slot":this.#_sR.querySelector("#fs-time").focus({focusVisible:!0});break;default:this.#_dates.focus()}}});