async function o(o,a={}){const[c,i]=e(o);if(void 0!==a.additionalModules)try{await n(i,a.additionalModules)}catch(o){throw console.error(o),o}void 0!==a.dependancies&&(console.time(`load Modules for ${c}`),await Promise.all(a.dependancies.map(async o=>{try{await import(`${i}/components/${o.constructor===Array?o.join("/"):o}/index.js`)}catch(t){throw`Component "${c}" could not load dependency "${o}" so stopping!!`}}))),console.timeEnd(`load Modules for ${c}`);try{await t(o)}catch(o){throw o.stack}}async function t(o,t=!1){const[n,a]=e(o),c=`${n}${t?"_v"+t:""}`,i=`${a}/components/${n}/${n.includes("/")?c.slice(c.lastIndexOf("/")+1):c}`;try{await async function(o){try{const t=await fetch(o);if(!t.ok)throw`Failed to load ${o} with status ${t.status}`;const n=await t.text();document.head.insertAdjacentHTML("beforeend",n)}catch(o){throw console.log(`loadTemplate() - ${o}`),o}}(`${i}.html`),await import(`${i}.js`)}catch(o){throw console.log(o),o}}async function n(o,t=[]){const n=[{label:"rtBC",file:"rt_baseclass.mjs"}].concat(t);return Promise.all(n.map(async t=>{if(void 0===window[t.label])try{window[t.label]=await import(`${o}/modules/${t.file}`)}catch(o){throw`module "${t.label}" failed to load`}return window[t.label]}))}function e(o){const t=o.split("/");if(t.length>4&&t.includes("components"))return[t.slice(t.indexOf("components")+1,t.length-1).join("/"),o.slice(0,o.indexOf("/components"))]}export{o as init,t as loadComponent,n as loadMods,e as parseCompURL};